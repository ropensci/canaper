<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Simulate the number of iterations needed to generate a random community that
is sufficiently different from the original community — cpr_iter_sim • canaper</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Simulate the number of iterations needed to generate a random community that
is sufficiently different from the original community — cpr_iter_sim"><meta property="og:description" content='For randomization algorithms that involve swapping (iterations), there is no
way to know a-priori how many iterations are needed to sufficiently "mix"
the community data matrix. cpr_iter_sim() records the percentage similarity
between the original matrix and a matrix that has been randomized with
successive swapping iterations, at each iteration.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">canaper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/canape.html">CANAPE example</a>
    </li>
    <li>
      <a href="../articles/how-many-rand.html">How many randomizations?</a>
    </li>
    <li>
      <a href="../articles/parallel.html">Parallel computing</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ropensci/canaper/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Simulate the number of iterations needed to generate a random community that
is sufficiently different from the original community</h1>
    <small class="dont-index">Source: <a href="https://github.com/ropensci/canaper/blob/HEAD/R/cpr_iter_sim.R" class="external-link"><code>R/cpr_iter_sim.R</code></a></small>
    <div class="hidden name"><code>cpr_iter_sim.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>For randomization algorithms that involve swapping (iterations), there is no
way to know <em>a-priori</em> how many iterations are needed to sufficiently "mix"
the community data matrix. <code>cpr_iter_sim()</code> records the percentage similarity
between the original matrix and a matrix that has been randomized with
successive swapping iterations, at each iteration.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cpr_iter_sim</span><span class="op">(</span></span>
<span>  <span class="va">comm</span>,</span>
<span>  null_model <span class="op">=</span> <span class="st">"curveball"</span>,</span>
<span>  n_iterations <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  thin <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>comm</dt>
<dd><p>Dataframe or matrix; input community data with
sites (communities) as rows and species as columns. Values of each cell are
the presence/absence (0 or 1) or number of individuals (abundance) of each
species in each site.</p></dd>


<dt>null_model</dt>
<dd><p>Character vector of length 1 or object of class <code>commsim</code>;
either the name of the model to use for generating random communities (null
model), or a custom null model. For full list of available predefined null
models, see the help file of <code><a href="https://rdrr.io/pkg/vegan/man/commsim.html" class="external-link">vegan::commsim()</a></code>, or run
<code><a href="https://rdrr.io/pkg/vegan/man/commsim.html" class="external-link">vegan::make.commsim()</a></code>. An object of class <code>commsim</code> can be generated with
<code><a href="https://rdrr.io/pkg/vegan/man/commsim.html" class="external-link">vegan::commsim()</a></code>.</p></dd>


<dt>n_iterations</dt>
<dd><p>Numeric vector of length 1; maximum number of iterations to
conduct.</p></dd>


<dt>thin</dt>
<dd><p>Numeric vector of length 1; frequency to record percentage
similarity between original matrix and randomized matrix. Results will
be recorded every <code>thin</code> iterations (see Details).</p></dd>


<dt>seed</dt>
<dd><p>Integer vector of length 1 or NULL; random seed that will be used
in a call to <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed()</a></code> before randomizing the matrix. Default (<code>NULL</code>)
will not change the random generator state.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Tibble (dataframe) with the following columns:</p><ul><li><p><code>iteration</code>: Number of iterations used to generate random community</p></li>
<li><p><code>similarity</code>: Percentage similarity between original community and
random community</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>The user should inspect the results to determine at what number of iterations
the original matrix and randomized matrix reach maximum dissimilarity (see
Examples). This number will strongly depend on the size and structure of the
original matrix. Large matrices with many zeros will likely take more
iterations, and even then still retain relatively high similarity between the
original matrix and the randomized matrix.</p>
<p>Available memory may be quickly exhausted if many (e.g., tens or hundreds of
thousands, or more) of iterations are used with no thinning on large
matrices; use <code>thin</code> to only record a portion of the results and save on
memory.</p>
<p>Of course, <code>cpr_iter_sim()</code> only makes sense for randomization algorithms
that use iterations.</p>
<p>Only presence/absence information is used to calculate percentage similarity
between community matrices.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Simulate generation of a random community with maximum of 10,000</span></span></span>
<span class="r-in"><span><span class="co"># iterations, recording similarity every 100 iterations</span></span></span>
<span class="r-in"><span><span class="op">(</span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">cpr_iter_sim</span><span class="op">(</span></span></span>
<span class="r-in"><span>  comm <span class="op">=</span> <span class="va">biod_example</span><span class="op">$</span><span class="va">comm</span>,</span></span>
<span class="r-in"><span>  null_model <span class="op">=</span> <span class="st">"swap"</span>,</span></span>
<span class="r-in"><span>  n_iterations <span class="op">=</span> <span class="fl">10000</span>,</span></span>
<span class="r-in"><span>  thin <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span>  seed <span class="op">=</span> <span class="fl">123</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 100 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    iteration similarity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span>       100      0.928</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span>       200      0.896</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span>       300      0.879</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span>       400      0.864</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span>       500      0.860</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span>       600      0.862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span>       700      0.862</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span>       800      0.856</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span>       900      0.858</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span>      <span style="text-decoration: underline;">1</span>000      0.858</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># … with 90 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot reveals that ca. 1000 iterations are sufficient to</span></span></span>
<span class="r-in"><span><span class="co"># completely mix random community</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">res</span><span class="op">$</span><span class="va">iteration</span>, <span class="va">res</span><span class="op">$</span><span class="va">similarity</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="cpr_iter_sim-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Joel H. Nitta.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

